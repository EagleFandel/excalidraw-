---
title: Excalidraw+ Zeabur /api 路由排障
sidebar_label: Zeabur /api 路由排障
---

# Excalidraw+ Zeabur /api 路由排障

当你访问：

```bash
curl -i https://excalidraw.nomoo.top/api/health
```

返回的是前端 HTML 而不是 JSON，说明 `/api/*` 被 SPA 回退规则吃掉了。

## 根因

`docker/nginx/default.conf.template` 之前只配置了：

- `location / { try_files ... /index.html; }`

没有配置 `/api/` 反代。

## 修复

已在 `docker/nginx/default.conf.template` 增加：

- `location /api/ { proxy_pass ${API_UPSTREAM}; ... }`

## Zeabur 环境变量

前端服务（web）至少要有：

- `PORT=8080`
- `API_UPSTREAM=http://<你的后端服务名>:3005/`

示例见：`.env.zeabur.example`。

## 验证

重新部署后执行：

```bash
curl -i https://excalidraw.nomoo.top/api/health
```

期望返回：

```json
{"ok":true,"db":true}
```

